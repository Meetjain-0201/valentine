<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine? üíù</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes roseBloom {
            0% {
                transform: scale(0.1) rotate(-90deg);
                opacity: 0;
                filter: brightness(0.5);
            }
            15% {
                transform: scale(0.3) rotate(-60deg);
                opacity: 0.5;
            }
            35% {
                transform: scale(0.5) rotate(-30deg);
                opacity: 0.7;
            }
            50% {
                transform: scale(0.7) rotate(-10deg);
                opacity: 0.85;
            }
            70% {
                transform: scale(0.9) rotate(5deg);
                opacity: 0.95;
            }
            85% {
                transform: scale(1.05) rotate(0deg);
                opacity: 1;
                filter: brightness(1.2);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
                filter: brightness(1);
            }
        }
        
        @keyframes petalBurst {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                opacity: 0.6;
            }
            100% {
                transform: scale(2) rotate(360deg);
                opacity: 0;
            }
        }
        
        @keyframes petalFloat {
            0% {
                transform: translateY(0) scale(0) rotate(0deg);
                opacity: 0;
            }
            20% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) scale(1.5) rotate(180deg);
                opacity: 0;
            }
        }
        
        @keyframes sparkle {
            0%, 100% {
                opacity: 0;
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: scale(1.5);
            }
        }
        
        @keyframes gentleGlow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(255, 182, 193, 0.3);
            }
            50% {
                box-shadow: 0 0 40px rgba(255, 105, 180, 0.6);
            }
        }
        
        .rose-bloom-main {
            animation: roseBloom 7s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        
        .petal-burst {
            animation: petalBurst 7s ease-out forwards;
        }
        
        .petal-float {
            animation: petalFloat 7s ease-out forwards;
        }
        
        .sparkle {
            animation: sparkle 2s ease-in-out infinite;
        }
        
        .glow-effect {
            animation: gentleGlow 3s ease-in-out infinite;
            animation-delay: 5s;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        const Heart = ({ className, style }) => (
            <svg className={className} style={style} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
        );
        
        const X = ({ size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const ValentineProposal = () => {
            const [stage, setStage] = useState('proposal');
            const [noCount, setNoCount] = useState(0);
            const [selectedDay, setSelectedDay] = useState(null);
            const [showEnvelope, setShowEnvelope] = useState(false);
            const [noButtonSize, setNoButtonSize] = useState(1);
            const [yesButtonSize, setYesButtonSize] = useState(1);

            const noMessages = [
                "Are you sure? ü•∫",
                "Please? üôè",
                "Pretty please? üíï",
                "I'll buy you ice cream? üç¶",
                "Come on, don't break my heart! üíî",
                "I promise to be the best valentine ever! ‚ú®",
                "Think about all the cuddles! ü§ó",
                "But... but... I already planned everything! üò≠"
            ];

            const valentineWeek = [
                { date: '2026-02-07', name: 'Rose Day', emoji: 'üåπ' },
                { date: '2026-02-08', name: 'Propose Day', emoji: 'üíç' },
                { date: '2026-02-09', name: 'Chocolate Day', emoji: 'üç´' },
                { date: '2026-02-10', name: 'Teddy Day', emoji: 'üß∏' },
                { date: '2026-02-11', name: 'Promise Day', emoji: 'ü§ù' },
                { date: '2026-02-12', name: 'Hug Day', emoji: 'ü§ó' },
                { date: '2026-02-13', name: 'Kiss Day', emoji: 'üíã' },
                { date: '2026-02-14', name: "Valentine's Day", emoji: '‚ù§Ô∏è' }
            ];

            const handleNo = () => {
                setNoCount(prev => prev + 1);
                setNoButtonSize(prev => Math.max(0.3, prev - 0.15));
                setYesButtonSize(prev => prev + 0.2);
            };

            const handleYes = () => {
                setStage('accepted');
                setTimeout(() => setStage('calendar'), 3000);
            };

            const openDay = (day) => {
                const todayDate = new Date();
                const today = `${todayDate.getFullYear()}-${String(todayDate.getMonth() + 1).padStart(2, '0')}-${String(todayDate.getDate()).padStart(2, '0')}`;
                const dayDate = day.date;
                
                if (dayDate <= today) {
                    setSelectedDay(day);
                    setShowEnvelope(true);
                }
            };

            const getDayContent = (day) => {
                if (day.name === 'Rose Day') {
                    return (
                        <div className="text-center space-y-4">
                            <h2 className="text-3xl font-bold text-pink-600 mb-4">Happy Rose Day! üåπ</h2>
                            <div className="relative inline-block py-20">
                                {/* Floating petals - Layer 1 (Background) */}
                                <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                    <div className="petal-float text-6xl absolute" style={{left: '-60px', top: '20px', animationDelay: '1s'}}>üå∏</div>
                                    <div className="petal-float text-5xl absolute" style={{right: '-50px', top: '30px', animationDelay: '1.5s'}}>üå∏</div>
                                    <div className="petal-float text-6xl absolute" style={{left: '-40px', bottom: '40px', animationDelay: '2s'}}>üå∏</div>
                                    <div className="petal-float text-5xl absolute" style={{right: '-60px', bottom: '30px', animationDelay: '2.5s'}}>üå∏</div>
                                    <div className="petal-float text-4xl absolute" style={{left: '0px', top: '-20px', animationDelay: '3s'}}>üå∏</div>
                                    <div className="petal-float text-4xl absolute" style={{right: '10px', top: '-10px', animationDelay: '3.5s'}}>üå∏</div>
                                </div>
                                
                                {/* Burst petals - Layer 2 */}
                                <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                    <div className="petal-burst text-8xl text-pink-200 absolute" style={{animationDelay: '0.5s'}}>üå∏</div>
                                    <div className="petal-burst text-7xl text-pink-300 absolute" style={{animationDelay: '1s'}}>üå∏</div>
                                    <div className="petal-burst text-6xl text-pink-200 absolute" style={{animationDelay: '1.5s'}}>üå∏</div>
                                </div>
                                
                                {/* Sparkles - Layer 3 */}
                                <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                    <div className="sparkle text-3xl absolute" style={{left: '-30px', top: '10px', animationDelay: '4s'}}>‚ú®</div>
                                    <div className="sparkle text-2xl absolute" style={{right: '-20px', top: '20px', animationDelay: '4.3s'}}>‚ú®</div>
                                    <div className="sparkle text-3xl absolute" style={{left: '-20px', bottom: '30px', animationDelay: '4.6s'}}>‚ú®</div>
                                    <div className="sparkle text-2xl absolute" style={{right: '-30px', bottom: '20px', animationDelay: '4.9s'}}>‚ú®</div>
                                    <div className="sparkle text-4xl absolute" style={{left: '20px', top: '-10px', animationDelay: '5.2s'}}>‚ú®</div>
                                    <div className="sparkle text-3xl absolute" style={{right: '20px', top: '0px', animationDelay: '5.5s'}}>‚ú®</div>
                                    <div className="sparkle text-2xl absolute" style={{left: '40px', bottom: '10px', animationDelay: '5.8s'}}>üí´</div>
                                    <div className="sparkle text-2xl absolute" style={{right: '40px', bottom: '15px', animationDelay: '6.1s'}}>üí´</div>
                                </div>
                                
                                {/* Main blooming rose - Layer 4 (Front) */}
                                <div className="relative z-10">
                                    <div className="rose-bloom-main glow-effect text-9xl inline-block">üåπ</div>
                                </div>
                            </div>
                            
                            <div className="max-w-lg mx-auto space-y-4 px-4">
                                <p className="text-xl text-gray-800 leading-relaxed">
                                    A ‡§´‡•Ç‡§≤ for my fool
                                </p>
                            </div>
                        </div>
                    );
                } else if (day.name === 'Propose Day') {
                    return (
                        <div className="text-center space-y-6">
                            <h2 className="text-3xl font-bold text-pink-600 mb-6">Happy Propose Day! üíç</h2>
                            
                            {/* Newspaper Display */}
                            <div className="max-w-3xl mx-auto">
                                <div className="relative bg-gradient-to-br from-amber-50 to-yellow-50 p-6 rounded-lg shadow-2xl">
                                    {/* Newspaper Image */}
                                    <div className="relative">
                                        <img 
                                            src="propose-day-newspaper.png" 
                                            alt="Breaking News - Proposal" 
                                            className="w-full h-auto rounded shadow-lg"
                                            style={{
                                                filter: 'sepia(0.1) contrast(1.05)',
                                                boxShadow: '0 10px 40px rgba(0,0,0,0.3)'
                                            }}
                                        />
                                    </div>
                                </div>
                            </div>
                            
                            {/* Sweet Message Below */}
                            <div className="max-w-2xl mx-auto mt-8 px-4">
                                <div className="bg-white rounded-xl p-6 shadow-lg">
                                    <p className="text-gray-800 text-lg leading-relaxed mb-4">
                                        February 7th, 2026 - the day we said the 'L' world üòâüíï
                                    </p>
                                    <p className="text-gray-600">
                                        Dekh paper pe chhap gaya matlab official hai üì∞üò¨
                                    </p>
                                </div>
                            </div>
                        </div>
                    );
                } else if (day.name === 'Chocolate Day') {
                    return (
                        <div className="max-w-3xl mx-auto p-4">
                            <div className="bg-white rounded-lg shadow-lg overflow-hidden">
                                {/* FedEx Header */}
                                <div className="bg-purple-700 text-white p-4 flex items-center gap-3">
                                    <div className="text-3xl font-bold">FedEx</div>
                                    <div className="text-sm">Tracking</div>
                                </div>
                                
                                {/* Tracking Number */}
                                <div className="p-6 border-b">
                                    <div className="text-sm text-gray-600 mb-1">Tracking Number</div>
                                    <div className="text-2xl font-bold text-gray-800">LOVE2026CHOCOLATE</div>
                                </div>
                                
                                {/* Delivery Status */}
                                <div className="bg-green-50 border-l-4 border-green-500 p-6">
                                    <div className="flex items-center gap-3 mb-2">
                                        <div className="text-4xl">üì¶</div>
                                        <div>
                                            <div className="text-2xl font-bold text-green-700">Delivered</div>
                                            <div className="text-gray-700">Sunday, Feb 9, 2026 at 8:30 PM</div>
                                        </div>
                                    </div>
                                    <div className="mt-3 text-gray-700">
                                        <strong>Delivered to:</strong> 128 Day Street, Boston, MA
                                    </div>
                                    <div className="text-gray-600 mt-1">
                                        Left with: The most beautiful person in Boston üíï
                                    </div>
                                </div>
                                
                                {/* Package Details */}
                                <div className="p-6 border-b">
                                    <div className="font-semibold text-gray-800 mb-3">Package Details</div>
                                    <div className="grid grid-cols-2 gap-4 text-sm">
                                        <div>
                                            <div className="text-gray-600">Weight</div>
                                            <div className="font-medium">1 lb of sweetness</div>
                                        </div>
                                        <div>
                                            <div className="text-gray-600">Service</div>
                                            <div className="font-medium">Valentine Express</div>
                                        </div>
                                        <div>
                                            <div className="text-gray-600">Packaging</div>
                                            <div className="font-medium">With extra love ‚ù§Ô∏è</div>
                                        </div>
                                        <div>
                                            <div className="text-gray-600">Special Instructions</div>
                                            <div className="font-medium">Handle with care üç´</div>
                                        </div>
                                    </div>
                                </div>
                                
                                {/* Tracking History */}
                                <div className="p-6">
                                    <div className="font-semibold text-gray-800 mb-4">Tracking History</div>
                                    <div className="space-y-4">
                                        {/* Delivered */}
                                        <div className="flex gap-4">
                                            <div className="flex flex-col items-center">
                                                <div className="w-4 h-4 bg-green-500 rounded-full"></div>
                                                <div className="w-0.5 h-full bg-gray-300"></div>
                                            </div>
                                            <div className="flex-1 pb-4">
                                                <div className="font-semibold text-gray-800">Delivered</div>
                                                <div className="text-sm text-gray-600">Sunday, Feb 9, 2026 - 8:30 PM</div>
                                                <div className="text-sm text-gray-500">128 Day Street, Boston, MA</div>
                                            </div>
                                        </div>
                                        
                                        {/* Out for Delivery */}
                                        <div className="flex gap-4">
                                            <div className="flex flex-col items-center">
                                                <div className="w-4 h-4 bg-purple-500 rounded-full"></div>
                                                <div className="w-0.5 h-full bg-gray-300"></div>
                                            </div>
                                            <div className="flex-1 pb-4">
                                                <div className="font-semibold text-gray-800">Out for delivery</div>
                                                <div className="text-sm text-gray-600">Sunday, Feb 9, 2026 - 7:00 PM</div>
                                                <div className="text-sm text-gray-500">Boston, MA</div>
                                            </div>
                                        </div>
                                        
                                        {/* In Transit */}
                                        <div className="flex gap-4">
                                            <div className="flex flex-col items-center">
                                                <div className="w-4 h-4 bg-purple-500 rounded-full"></div>
                                                <div className="w-0.5 h-full bg-gray-300"></div>
                                            </div>
                                            <div className="flex-1 pb-4">
                                                <div className="font-semibold text-gray-800">In transit</div>
                                                <div className="text-sm text-gray-600">Sunday, Feb 9, 2026 - 2:00 PM</div>
                                                <div className="text-sm text-gray-500">Local FedEx facility, Boston, MA</div>
                                            </div>
                                        </div>
                                        
                                        {/* Picked Up */}
                                        <div className="flex gap-4">
                                            <div className="flex flex-col items-center">
                                                <div className="w-4 h-4 bg-purple-500 rounded-full"></div>
                                            </div>
                                            <div className="flex-1">
                                                <div className="font-semibold text-gray-800">Picked up</div>
                                                <div className="text-sm text-gray-600">Sunday, Feb 9, 2026 - 10:00 AM</div>
                                                <div className="text-sm text-gray-500">From: Heart & Soul Chocolate Co.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                {/* Sweet Message */}
                                <div className="bg-pink-50 p-6 text-center">
                                    <div className="text-3xl mb-3">üç´</div>
                                    <div className="text-lg font-semibold text-gray-800 mb-2">
                                        Happy Chocolate Day!
                                    </div>
                                    <div className="text-gray-600">
                                        Just like chocolate, life is sweeter with you! üíï
                                    </div>
                                </div>
                            </div>
                        </div>
                    );
                } else if (day.name === 'Promise Day') {
                    const PromisePlayer = () => {
                        const [isPlaying, setIsPlaying] = React.useState(false);
                        const [currentTime, setCurrentTime] = React.useState(0);
                        const [duration, setDuration] = React.useState(258); // Default 4:18 for Photograph
                        const [currentImageIndex, setCurrentImageIndex] = React.useState(0);
                        const audioRef = React.useRef(null);
                        
                        // Images - cover first, then your photos
                        const images = [
                            'photograph-cover.jpg',
                            'photo1.jpeg',
                            'photo2.jpeg',
                            'photo3.jpeg',
                            'photo4.jpeg',
                            'photo5.jpeg'
                        ];
                        
                        React.useEffect(() => {
                            const audio = audioRef.current;
                            if (!audio) return;
                            
                            const updateTime = () => setCurrentTime(audio.currentTime);
                            const updateDuration = () => setDuration(audio.duration);
                            
                            audio.addEventListener('timeupdate', updateTime);
                            audio.addEventListener('loadedmetadata', updateDuration);
                            
                            return () => {
                                audio.removeEventListener('timeupdate', updateTime);
                                audio.removeEventListener('loadedmetadata', updateDuration);
                            };
                        }, []);
                        
                        // Slideshow: Cover for 5s, then photos 1-5 cycling every 10s
                        React.useEffect(() => {
                            if (!isPlaying) return;
                            
                            setCurrentImageIndex(0); // Start with cover
                            
                            // After 5 seconds, move to first photo
                            const coverTimeout = setTimeout(() => {
                                setCurrentImageIndex(1);
                                
                                // Then cycle photos 1-5 every 10 seconds
                                const photoInterval = setInterval(() => {
                                    setCurrentImageIndex(prev => {
                                        if (prev >= 5) return 1; // After photo5, back to photo1
                                        return prev + 1;
                                    });
                                }, 10000);
                                
                                return () => clearInterval(photoInterval);
                            }, 5000);
                            
                            return () => clearTimeout(coverTimeout);
                        }, [isPlaying]);
                        
                        const togglePlay = () => {
                            const audio = audioRef.current;
                            if (isPlaying) {
                                audio?.pause();
                                setCurrentImageIndex(0);
                            } else {
                                audio?.play();
                            }
                            setIsPlaying(!isPlaying);
                        };
                        
                        const handleProgressClick = (e) => {
                            const audio = audioRef.current;
                            if (!audio) return;
                            const progressBar = e.currentTarget;
                            const clickX = e.clientX - progressBar.getBoundingClientRect().left;
                            const width = progressBar.offsetWidth;
                            const newTime = (clickX / width) * duration;
                            audio.currentTime = newTime;
                        };
                        
                        const formatTime = (time) => {
                            if (isNaN(time) || !isFinite(time)) return '0:00';
                            const mins = Math.floor(time / 60);
                            const secs = Math.floor(time % 60);
                            return `${mins}:${secs.toString().padStart(2, '0')}`;
                        };
                        
                        return (
                            <div className="max-w-2xl mx-auto">
                                <h2 className="text-3xl font-bold text-pink-600 mb-6 text-center">Happy Promise Day! ü§ù</h2>
                                
                                {/* Spotify-style Player */}
                                <div className="bg-gradient-to-b from-gray-900 to-black rounded-2xl shadow-2xl overflow-hidden">
                                    {/* Album Art / Photo Slideshow */}
                                    <div className="relative aspect-square bg-gray-800">
                                        {images.map((img, index) => (
                                            <img
                                                key={index}
                                                src={img}
                                                alt={index === 0 ? 'Photograph Cover' : `Our Memory ${index}`}
                                                className="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000"
                                                style={{
                                                    opacity: currentImageIndex === index ? 1 : 0,
                                                    zIndex: currentImageIndex === index ? 10 : 1
                                                }}
                                            />
                                        ))}
                                        
                                        {/* Debug indicator - shows which photo is active */}
                                        <div className="absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm z-20">
                                            {currentImageIndex === 0 ? 'Cover' : `Photo ${currentImageIndex}`}
                                        </div>
                                    </div>
                                    
                                    {/* Song Info */}
                                    <div className="p-6">
                                        <h3 className="text-white text-2xl font-bold mb-1">Photograph</h3>
                                        <p className="text-gray-400 text-lg mb-6">Ed Sheeran</p>
                                        
                                        {/* Progress Bar */}
                                        <div className="mb-4">
                                            <div 
                                                className="w-full h-1 bg-gray-700 rounded-full cursor-pointer group"
                                                onClick={handleProgressClick}
                                            >
                                                <div 
                                                    className="h-full bg-white rounded-full transition-all group-hover:bg-green-500"
                                                    style={{ width: `${duration > 0 ? (currentTime / duration) * 100 : 0}%` }}
                                                ></div>
                                            </div>
                                            <div className="flex justify-between text-xs text-gray-400 mt-2">
                                                <span>{formatTime(currentTime)}</span>
                                                <span>{formatTime(duration)}</span>
                                            </div>
                                        </div>
                                        
                                        {/* Controls */}
                                        <div className="flex items-center justify-center gap-6">
                                            <button 
                                                onClick={togglePlay}
                                                className="w-16 h-16 bg-white rounded-full flex items-center justify-center hover:scale-105 transition-transform shadow-lg"
                                            >
                                                {isPlaying ? (
                                                    <svg className="w-8 h-8 text-black" fill="currentColor" viewBox="0 0 24 24">
                                                        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                                                    </svg>
                                                ) : (
                                                    <svg className="w-8 h-8 text-black ml-1" fill="currentColor" viewBox="0 0 24 24">
                                                        <path d="M8 5v14l11-7z"/>
                                                    </svg>
                                                )}
                                            </button>
                                        </div>
                                        
                                        {/* Hidden Audio Element */}
                                        <audio ref={audioRef} src="photograph.mp3" />
                                    </div>
                                </div>
                                
                                {/* Message */}
                                <div className="mt-6 text-center px-4">
                                    <p className="text-gray-700 text-lg mb-2">
                                        "We keep this love in a photograph, we made these memories for ourselves."
                                    </p>
                                    <p className="text-gray-600 mb-6">
                                        Every moment with you is worth capturing. üì∏üíï
                                    </p>
                                    
                                    {/* Promises Section */}
                                    <div className="max-w-xl mx-auto mt-8 bg-white rounded-xl p-6 shadow-lg text-left">
                                        <h4 className="text-xl font-bold text-gray-800 mb-4 text-center">I promise to make these moments count.</h4>
                                        <div className="space-y-3 text-gray-700 leading-relaxed">
                                            <p>I can't promise you tomorrow, but I promise you today. I promise to love you fully in every moment we have, to laugh with you until our sides hurt, to hold you close when the world feels heavy.</p>
                                            
                                            <p>I promise to capture every memory with you - not just in photographs, but in the way I remember your smile, the sound of your laugh, the feeling of your hand in mine.</p>
                                            
                                            <p>I promise that if our time comes to an end, I won't regret a single moment. Because loving you right now is the best thing I've ever done.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        );
                    };
                    
                    return <PromisePlayer />;
                } else if (day.name === 'Hug Day') {
                    const HugPlayer = () => {
                        const [isPlaying, setIsPlaying] = React.useState(false);
                        const [currentTime, setCurrentTime] = React.useState(0);
                        const [duration, setDuration] = React.useState(240); // Placeholder duration
                        const [currentImageIndex, setCurrentImageIndex] = React.useState(0);
                        const audioRef = React.useRef(null);
                        
                        // Images for Hug Day
                        const images = [
                            'hug-cover.jpg',
                            'photo6.jpeg',
                            'photo7.jpeg',
                            'photo8.jpeg',
                            'photo9.jpeg',
                            'photo10.jpeg',
                            'photo16.jpeg',
                            'photo17.jpeg',
                            'photo18.jpeg',
                            'photo19.jpeg',
                            'photo20.jpeg'
                        ];
                        
                        React.useEffect(() => {
                            const audio = audioRef.current;
                            if (!audio) return;
                            
                            const updateTime = () => setCurrentTime(audio.currentTime);
                            const updateDuration = () => setDuration(audio.duration);
                            
                            audio.addEventListener('timeupdate', updateTime);
                            audio.addEventListener('loadedmetadata', updateDuration);
                            
                            return () => {
                                audio.removeEventListener('timeupdate', updateTime);
                                audio.removeEventListener('loadedmetadata', updateDuration);
                            };
                        }, []);
                        
                        // Slideshow logic
                        React.useEffect(() => {
                            if (!isPlaying) return;
                            
                            setCurrentImageIndex(0);
                            
                            const coverTimeout = setTimeout(() => {
                                setCurrentImageIndex(1);
                                
                                const photoInterval = setInterval(() => {
                                    setCurrentImageIndex(prev => {
                                        if (prev >= 10) return 1;
                                        return prev + 1;
                                    });
                                }, 10000);
                                
                                return () => clearInterval(photoInterval);
                            }, 5000);
                            
                            return () => clearTimeout(coverTimeout);
                        }, [isPlaying]);
                        
                        const togglePlay = () => {
                            const audio = audioRef.current;
                            if (isPlaying) {
                                audio?.pause();
                                setCurrentImageIndex(0);
                            } else {
                                audio?.play();
                            }
                            setIsPlaying(!isPlaying);
                        };
                        
                        const handleProgressClick = (e) => {
                            const audio = audioRef.current;
                            if (!audio) return;
                            const progressBar = e.currentTarget;
                            const clickX = e.clientX - progressBar.getBoundingClientRect().left;
                            const width = progressBar.offsetWidth;
                            const newTime = (clickX / width) * duration;
                            audio.currentTime = newTime;
                        };
                        
                        const formatTime = (time) => {
                            if (isNaN(time) || !isFinite(time)) return '0:00';
                            const mins = Math.floor(time / 60);
                            const secs = Math.floor(time % 60);
                            return `${mins}:${secs.toString().padStart(2, '0')}`;
                        };
                        
                        return (
                            <div className="max-w-2xl mx-auto">
                                <h2 className="text-3xl font-bold text-pink-600 mb-6 text-center">Happy Hug Day! ü§ó</h2>
                                
                                {/* Spotify-style Player */}
                                <div className="bg-gradient-to-b from-gray-900 to-black rounded-2xl shadow-2xl overflow-hidden">
                                    {/* Album Art / Photo Slideshow */}
                                    <div className="relative aspect-square bg-gray-800">
                                        {images.map((img, index) => (
                                            <img
                                                key={index}
                                                src={img}
                                                alt={index === 0 ? 'Album Cover' : `Our Memory ${index + 5}`}
                                                className="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000"
                                                style={{
                                                    opacity: currentImageIndex === index ? 1 : 0,
                                                    zIndex: currentImageIndex === index ? 10 : 1
                                                }}
                                            />
                                        ))}
                                        
                                        <div className="absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm z-20">
                                            {currentImageIndex === 0 ? 'Cover' : 
                                             currentImageIndex <= 5 ? `Photo ${currentImageIndex + 5}` : 
                                             `Photo ${currentImageIndex + 10}`}
                                        </div>
                                    </div>
                                    
                                    {/* Song Info */}
                                    <div className="p-6">
                                        <h3 className="text-white text-2xl font-bold mb-1">Pretty Baby</h3>
                                        <p className="text-gray-400 text-lg mb-6">Alex Sampson</p>
                                        
                                        {/* Progress Bar */}
                                        <div className="mb-4">
                                            <div 
                                                className="w-full h-1 bg-gray-700 rounded-full cursor-pointer group"
                                                onClick={handleProgressClick}
                                            >
                                                <div 
                                                    className="h-full bg-white rounded-full transition-all group-hover:bg-green-500"
                                                    style={{ width: `${duration > 0 ? (currentTime / duration) * 100 : 0}%` }}
                                                ></div>
                                            </div>
                                            <div className="flex justify-between text-xs text-gray-400 mt-2">
                                                <span>{formatTime(currentTime)}</span>
                                                <span>{formatTime(duration)}</span>
                                            </div>
                                        </div>
                                        
                                        {/* Controls */}
                                        <div className="flex items-center justify-center gap-6">
                                            <button 
                                                onClick={togglePlay}
                                                className="w-16 h-16 bg-white rounded-full flex items-center justify-center hover:scale-105 transition-transform shadow-lg"
                                            >
                                                {isPlaying ? (
                                                    <svg className="w-8 h-8 text-black" fill="currentColor" viewBox="0 0 24 24">
                                                        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                                                    </svg>
                                                ) : (
                                                    <svg className="w-8 h-8 text-black ml-1" fill="currentColor" viewBox="0 0 24 24">
                                                        <path d="M8 5v14l11-7z"/>
                                                    </svg>
                                                )}
                                            </button>
                                        </div>
                                        
                                        {/* Hidden Audio Element */}
                                        <audio ref={audioRef} src="hug-day-song.mp3" />
                                    </div>
                                </div>
                                
                                {/* Song Quote */}
                                <div className="mt-6 text-center px-4">
                                    <p className="text-gray-700 text-lg italic">
                                        "We'll look up at the stars, holding you in my arms, pretty baby."
                                    </p>
                                </div>
                            </div>
                        );
                    };
                    
                    return <HugPlayer />;
                } else if (day.name === 'Kiss Day') {
                    const KissPlayer = () => {
                        const [isPlaying, setIsPlaying] = React.useState(false);
                        const [currentTime, setCurrentTime] = React.useState(0);
                        const [duration, setDuration] = React.useState(189); // Kiss You duration ~3:09
                        const [currentImageIndex, setCurrentImageIndex] = React.useState(0);
                        const audioRef = React.useRef(null);
                        
                        // Images for Kiss Day
                        const images = [
                            'kiss-cover.jpg',
                            'photo11.jpeg',
                            'photo12.jpeg',
                            'photo13.jpeg',
                            'photo14.jpeg',
                            'photo15.jpeg'
                        ];
                        
                        React.useEffect(() => {
                            const audio = audioRef.current;
                            if (!audio) return;
                            
                            const updateTime = () => setCurrentTime(audio.currentTime);
                            const updateDuration = () => setDuration(audio.duration);
                            
                            audio.addEventListener('timeupdate', updateTime);
                            audio.addEventListener('loadedmetadata', updateDuration);
                            
                            return () => {
                                audio.removeEventListener('timeupdate', updateTime);
                                audio.removeEventListener('loadedmetadata', updateDuration);
                            };
                        }, []);
                        
                        // Slideshow logic
                        React.useEffect(() => {
                            if (!isPlaying) return;
                            
                            setCurrentImageIndex(0);
                            
                            const coverTimeout = setTimeout(() => {
                                setCurrentImageIndex(1);
                                
                                const photoInterval = setInterval(() => {
                                    setCurrentImageIndex(prev => {
                                        if (prev >= 5) return 1;
                                        return prev + 1;
                                    });
                                }, 10000);
                                
                                return () => clearInterval(photoInterval);
                            }, 5000);
                            
                            return () => clearTimeout(coverTimeout);
                        }, [isPlaying]);
                        
                        const togglePlay = () => {
                            const audio = audioRef.current;
                            if (isPlaying) {
                                audio?.pause();
                                setCurrentImageIndex(0);
                            } else {
                                audio?.play();
                            }
                            setIsPlaying(!isPlaying);
                        };
                        
                        const handleProgressClick = (e) => {
                            const audio = audioRef.current;
                            if (!audio) return;
                            const progressBar = e.currentTarget;
                            const clickX = e.clientX - progressBar.getBoundingClientRect().left;
                            const width = progressBar.offsetWidth;
                            const newTime = (clickX / width) * duration;
                            audio.currentTime = newTime;
                        };
                        
                        const formatTime = (time) => {
                            if (isNaN(time) || !isFinite(time)) return '0:00';
                            const mins = Math.floor(time / 60);
                            const secs = Math.floor(time % 60);
                            return `${mins}:${secs.toString().padStart(2, '0')}`;
                        };
                        
                        return (
                            <div className="max-w-2xl mx-auto">
                                <h2 className="text-3xl font-bold text-pink-600 mb-6 text-center">Happy Kiss Day! üíã</h2>
                                
                                {/* Spotify-style Player */}
                                <div className="bg-gradient-to-b from-gray-900 to-black rounded-2xl shadow-2xl overflow-hidden">
                                    {/* Album Art / Photo Slideshow */}
                                    <div className="relative aspect-square bg-gray-800">
                                        {images.map((img, index) => (
                                            <img
                                                key={index}
                                                src={img}
                                                alt={index === 0 ? 'Kiss You Cover' : `Our Memory ${index + 10}`}
                                                className="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000"
                                                style={{
                                                    opacity: currentImageIndex === index ? 1 : 0,
                                                    zIndex: currentImageIndex === index ? 10 : 1
                                                }}
                                            />
                                        ))}
                                        
                                        <div className="absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm z-20">
                                            {currentImageIndex === 0 ? 'Cover' : `Photo ${currentImageIndex + 10}`}
                                        </div>
                                    </div>
                                    
                                    {/* Song Info */}
                                    <div className="p-6">
                                        <h3 className="text-white text-2xl font-bold mb-1">Kiss You</h3>
                                        <p className="text-gray-400 text-lg mb-6">One Direction</p>
                                        
                                        {/* Progress Bar */}
                                        <div className="mb-4">
                                            <div 
                                                className="w-full h-1 bg-gray-700 rounded-full cursor-pointer group"
                                                onClick={handleProgressClick}
                                            >
                                                <div 
                                                    className="h-full bg-white rounded-full transition-all group-hover:bg-green-500"
                                                    style={{ width: `${duration > 0 ? (currentTime / duration) * 100 : 0}%` }}
                                                ></div>
                                            </div>
                                            <div className="flex justify-between text-xs text-gray-400 mt-2">
                                                <span>{formatTime(currentTime)}</span>
                                                <span>{formatTime(duration)}</span>
                                            </div>
                                        </div>
                                        
                                        {/* Controls */}
                                        <div className="flex items-center justify-center gap-6">
                                            <button 
                                                onClick={togglePlay}
                                                className="w-16 h-16 bg-white rounded-full flex items-center justify-center hover:scale-105 transition-transform shadow-lg"
                                            >
                                                {isPlaying ? (
                                                    <svg className="w-8 h-8 text-black" fill="currentColor" viewBox="0 0 24 24">
                                                        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                                                    </svg>
                                                ) : (
                                                    <svg className="w-8 h-8 text-black ml-1" fill="currentColor" viewBox="0 0 24 24">
                                                        <path d="M8 5v14l11-7z"/>
                                                    </svg>
                                                )}
                                            </button>
                                        </div>
                                        
                                        {/* Hidden Audio Element */}
                                        <audio ref={audioRef} src="kiss-you.mp3" />
                                    </div>
                                </div>
                                
                                {/* Song Quote */}
                                <div className="mt-6 text-center px-4">
                                    <p className="text-gray-700 text-lg italic">
                                        "Oh, I just wanna take you anywhere that you like. We can go out any day, any night. Baby, I'll take you there, take you there."
                                    </p>
                                </div>
                            </div>
                        );
                    };
                    
                    return <KissPlayer />;
                } else if (day.name === 'Teddy Day') {
                    return (
                        <div className="relative overflow-hidden pb-20">
                            <h2 className="text-3xl font-bold text-pink-600 mb-6 text-center">Happy Teddy Day! üß∏</h2>
                            
                            {/* Video Section */}
                            <div className="max-w-3xl mx-auto mb-8">
                                <div className="bg-gray-900 rounded-lg overflow-hidden shadow-2xl">
                                    <video 
                                        className="w-full"
                                        autoPlay 
                                        loop 
                                        muted
                                        playsInline
                                    >
                                        <source src="ted-clip-1.mp4" type="video/mp4" />
                                        Your browser does not support the video tag.
                                    </video>
                                </div>
                            </div>
                            
                            {/* First Static Message */}
                            <div className="max-w-2xl mx-auto mb-8 px-4">
                                <div className="bg-white rounded-2xl p-6 shadow-lg text-center">
                                    <p className="text-gray-800 font-medium">
                                        "Hey! You scared of the dark? Me too! Wanna be Thunder Buddies? 
                                        When you hear the sound of thunder, don't you get too scared. 
                                        Just grab your Thunder Buddy and say these magic words..." üå©Ô∏è
                                    </p>
                                </div>
                            </div>
                            
                            {/* Animated Ted Bear Section */}
                            <div className="relative min-h-[300px] mb-8">
                                {/* Speech bubble that appears above Ted's head */}
                                <div className="ted-speech absolute bg-pink-100 rounded-2xl p-3 shadow-lg max-w-xs z-20 border-2 border-pink-300">
                                    <p className="text-gray-800 font-semibold text-sm text-center">
                                        *winks at you* üòè
                                    </p>
                                    <div className="absolute top-full left-1/2 transform -translate-x-1/2">
                                        <div className="w-0 h-0 border-l-8 border-r-8 border-t-8 border-transparent border-t-pink-300"></div>
                                    </div>
                                </div>
                                
                                {/* Ted moving around */}
                                <div className="ted-bear absolute text-9xl transition-all duration-1000 ease-in-out">
                                    üß∏
                                </div>
                            </div>
                            
                            {/* Final Thunder Buddies Message */}
                            <div className="max-w-2xl mx-auto mt-12 px-4">
                                <div className="bg-gradient-to-r from-pink-100 to-red-100 p-6 rounded-xl shadow-lg">
                                    <h3 className="text-2xl font-bold text-gray-800 mb-4 text-center">
                                        ‚ö° Thunder Buddies For Life! ‚ö°
                                    </h3>
                                    <p className="text-gray-700 text-lg mb-3 text-center">
                                        "You're my best friend, Aheen. And no matter how much life tries to pull us apart, 
                                        we're always gonna be Thunder Buddies."
                                    </p>
                                    <p className="text-gray-600 text-base mb-4 italic text-center">
                                        - Ted
                                    </p>
                                    <div className="border-t-2 border-pink-300 pt-4">
                                        <p className="text-gray-700 text-center">
                                            So yeah, you got yourself a real teddy bear from your man. 
                                            I'm just here to remind you that whether it's thunder, scary movies, 
                                            or spiders in the bathroom... you two got each other. üß∏üíï
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            {/* Styles for Ted animations */}
                            <style>{`
                                .ted-bear {
                                    animation: tedMove 15s ease-in-out infinite;
                                    bottom: 100px;
                                }
                                
                                .ted-speech {
                                    animation: speechAppear 15s ease-in-out infinite;
                                    bottom: 250px;
                                    left: 50%;
                                    transform: translateX(-50%);
                                }
                                
                                @keyframes tedMove {
                                    0% { 
                                        left: 10%; 
                                        transform: rotate(-5deg) scale(1);
                                    }
                                    15% { 
                                        left: 45%; 
                                        transform: rotate(0deg) scale(1.05);
                                    }
                                    /* Stop and show message */
                                    30%, 55% { 
                                        left: 45%; 
                                        transform: rotate(0deg) scale(1);
                                    }
                                    /* Resume moving */
                                    70% { 
                                        left: 75%; 
                                        transform: rotate(5deg) scale(1.1);
                                    }
                                    85% { 
                                        left: 25%; 
                                        transform: rotate(-3deg) scale(0.95);
                                    }
                                    100% { 
                                        left: 10%; 
                                        transform: rotate(-5deg) scale(1);
                                    }
                                }
                                
                                @keyframes speechAppear {
                                    0%, 25% { 
                                        opacity: 0; 
                                        transform: translateX(-50%) translateY(-20px) scale(0.8);
                                    }
                                    /* Appear when Ted stops at center */
                                    30%, 55% { 
                                        opacity: 1;
                                        transform: translateX(-50%) translateY(0) scale(1);
                                    }
                                    /* Disappear when Ted moves again */
                                    60%, 100% { 
                                        opacity: 0;
                                        transform: translateX(-50%) translateY(-20px) scale(0.8);
                                    }
                                }
                            `}</style>
                        </div>
                    );
                } else if (day.name === "Valentine's Day") {
                    return (
                        <div className="text-center space-y-4">
                            <h2 className="text-3xl font-bold text-red-600 mb-4">Valentine's Day Special! ‚ù§Ô∏è</h2>
                            <div className="text-6xl mb-4">üè®</div>
                            <div className="bg-white p-6 rounded-lg shadow-md text-left">
                                <h3 className="text-xl font-semibold mb-3">Our Reservation</h3>
                                <p className="text-gray-700"><strong>Hotel:</strong> [Hotel Name]</p>
                                <p className="text-gray-700"><strong>Time:</strong> [Reservation Time]</p>
                                <p className="text-gray-700"><strong>Special:</strong> Romantic dinner for two</p>
                            </div>
                            <p className="text-gray-600 mt-4 italic">
                                Can't wait to celebrate this special day with you! üíë
                            </p>
                        </div>
                    );
                } else {
                    return (
                        <div className="text-center space-y-4">
                            <h2 className="text-3xl font-bold text-pink-600 mb-4">Happy {day.name}! {day.emoji}</h2>
                            <div className="text-9xl">{day.emoji}</div>
                            <p className="text-gray-600 mt-4">
                                This day's special message will be revealed soon... üíù
                            </p>
                        </div>
                    );
                }
            };

            if (stage === 'proposal') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-pink-100 via-red-50 to-purple-100 flex items-center justify-center p-4">
                        <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 max-w-md w-full text-center relative overflow-hidden">
                            <div className="absolute top-0 left-0 w-full h-full opacity-10">
                                {[...Array(20)].map((_, i) => (
                                    <Heart
                                        key={i}
                                        className="absolute animate-pulse"
                                        style={{
                                            top: `${Math.random() * 100}%`,
                                            left: `${Math.random() * 100}%`,
                                            fontSize: `${Math.random() * 30 + 10}px`,
                                            animationDelay: `${Math.random() * 2}s`
                                        }}
                                    />
                                ))}
                            </div>
                            
                            <div className="relative z-10">
                                <div className="text-8xl mb-6 animate-bounce">üíù</div>
                                <h1 className="text-4xl font-bold text-gray-800 mb-4">
                                    Will you be my Valentine?
                                </h1>
                                <p className="text-gray-600 mb-8">
                                    I have something special planned for you... üíï
                                </p>
                                
                                {noCount > 0 && (
                                    <div className="mb-6 p-4 bg-pink-50 rounded-lg animate-pulse">
                                        <p className="text-pink-600 font-semibold">
                                            {noMessages[Math.min(noCount - 1, noMessages.length - 1)]}
                                        </p>
                                    </div>
                                )}
                                
                                <div className="flex gap-4 justify-center items-center">
                                    <button
                                        onClick={handleYes}
                                        style={{ transform: `scale(${yesButtonSize})` }}
                                        className="bg-gradient-to-r from-pink-500 to-red-500 text-white px-8 py-4 rounded-full font-bold text-xl hover:scale-110 transition-all duration-300 shadow-lg hover:shadow-xl"
                                    >
                                        Yes! üíï
                                    </button>
                                    <button
                                        onClick={handleNo}
                                        style={{ transform: `scale(${noButtonSize})` }}
                                        className="bg-gray-300 text-gray-700 px-8 py-4 rounded-full font-bold text-xl hover:scale-95 transition-all duration-300"
                                    >
                                        No üò¢
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            if (stage === 'accepted') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-pink-100 via-red-50 to-purple-100 flex items-center justify-center p-4">
                        <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-2xl w-full text-center">
                            <div className="text-9xl mb-6 animate-bounce">üéâ</div>
                            <h1 className="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-red-500 mb-6">
                                Congratulations!
                            </h1>
                            <p className="text-2xl text-gray-700 mb-4">
                                You've made me the happiest man in the world! ü•∞
                            </p>
                            <div className="flex justify-center gap-2 text-6xl animate-pulse">
                                üíï ‚ù§Ô∏è üíñ üíó üíì
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-pink-100 via-red-50 to-purple-100 p-4 md:p-8">
                    <div className="max-w-6xl mx-auto">
                        <h1 className="text-4xl md:text-5xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-red-500 mb-4">
                            Our Valentine's Week üíù
                        </h1>
                        <p className="text-center text-gray-600 mb-8">
                            Click on each day to reveal your special surprise! üéÅ
                        </p>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            {valentineWeek.map((day, index) => {
                                const todayDate = new Date();
                                const today = `${todayDate.getFullYear()}-${String(todayDate.getMonth() + 1).padStart(2, '0')}-${String(todayDate.getDate()).padStart(2, '0')}`;
                                const isUnlocked = day.date <= today;
                                
                                return (
                                    <div
                                        key={index}
                                        onClick={() => isUnlocked && openDay(day)}
                                        className={`relative bg-white rounded-2xl p-6 text-center transition-all duration-300 ${
                                            isUnlocked
                                                ? 'cursor-pointer hover:scale-105 hover:shadow-2xl shadow-lg'
                                                : 'opacity-50 cursor-not-allowed'
                                        }`}
                                    >
                                        {!isUnlocked && (
                                            <div className="absolute top-2 right-2 text-2xl">üîí</div>
                                        )}
                                        <div className="text-6xl mb-4">{day.emoji}</div>
                                        <h3 className="font-bold text-xl text-gray-800 mb-2">{day.name}</h3>
                                        <p className="text-sm text-gray-500">
                                            Feb {parseInt(day.date.split('-')[2])}
                                        </p>
                                    </div>
                                );
                            })}
                        </div>

                        {showEnvelope && selectedDay && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
                                <div className="bg-gradient-to-br from-pink-50 to-red-50 rounded-3xl p-4 md:p-8 max-w-4xl w-full relative shadow-2xl my-8 max-h-[85vh] overflow-y-auto">
                                    <button
                                        onClick={() => {
                                            setShowEnvelope(false);
                                            setSelectedDay(null);
                                        }}
                                        className="sticky top-2 right-2 float-right z-50 bg-white hover:bg-gray-100 text-gray-700 hover:text-gray-900 rounded-full p-2 shadow-lg transition-all duration-200"
                                    >
                                        <X size={24} />
                                    </button>
                                    
                                    <div className="clear-both">
                                        {getDayContent(selectedDay)}
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<ValentineProposal />, document.getElementById('root'));
    </script>
</body>
</html>
